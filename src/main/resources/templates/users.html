<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<head th:replace="fragments/layout :: header">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h1>All profiles!</h1>

    <li th:each="account: ${accounts}">
        <a th:href="@{/account/{nickname}(nickname=${account.getNickname()})}" th:text="${account.getUsername()}">name</a>

        <!-- hide follow button if already following or if profile is users own-->
        <span th:if="${!user.getFollowingAt().contains(account)}">
            <form th:action="@{/users/{id}(id=${account.getId()})}" method="POST">
                <input th:if="${!(user.getId() == account.getId())}" type="submit" value="Follow">
            </form>
        </span>

    </li>
    </ol>

<p></p>
<a href="mypage">My profile</a>
<br>
<br>
<form th:action="@{/logout}" method="post">
    <input type="submit" value="Log Out"/>
</form>

</body>
</html>